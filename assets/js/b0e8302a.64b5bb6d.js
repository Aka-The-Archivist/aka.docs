"use strict";(self.webpackChunkaka_docs=self.webpackChunkaka_docs||[]).push([[525],{3905:(e,t,r)=>{r.d(t,{Zo:()=>s,kt:()=>f});var n=r(7294);function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?o(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):o(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function l(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r,n,a={},o=Object.keys(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(n=0;n<o.length;n++)r=o[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}var d=n.createContext({}),c=function(e){var t=n.useContext(d),r=t;return e&&(r="function"==typeof e?e(t):i(i({},t),e)),r},s=function(e){var t=c(e.components);return n.createElement(d.Provider,{value:t},e.children)},u="mdxType",p={inlineCode:"code",wrapper:function(e){var t=e.children;return n.createElement(n.Fragment,{},t)}},m=n.forwardRef((function(e,t){var r=e.components,a=e.mdxType,o=e.originalType,d=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),u=c(r),m=a,f=u["".concat(d,".").concat(m)]||u[m]||p[m]||o;return r?n.createElement(f,i(i({ref:t},s),{},{components:r})):n.createElement(f,i({ref:t},s))}));function f(e,t){var r=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var o=r.length,i=new Array(o);i[0]=m;var l={};for(var d in t)hasOwnProperty.call(t,d)&&(l[d]=t[d]);l.originalType=e,l[u]="string"==typeof e?e:a,i[1]=l;for(var c=2;c<o;c++)i[c]=r[c];return n.createElement.apply(null,i)}return n.createElement.apply(null,r)}m.displayName="MDXCreateElement"},9799:(e,t,r)=>{r.r(t),r.d(t,{assets:()=>d,contentTitle:()=>i,default:()=>p,frontMatter:()=>o,metadata:()=>l,toc:()=>c});var n=r(7462),a=(r(7294),r(3905));const o={sidebar_position:1},i="Middleware",l={unversionedId:"the-basic/middleware",id:"the-basic/middleware",title:"Middleware",description:"Middleware function is a function that has access to the request object (req), the response object (res), and the next",source:"@site/docs/the-basic/middleware.md",sourceDirName:"the-basic",slug:"/the-basic/middleware",permalink:"/aka.docs/docs/the-basic/middleware",draft:!1,tags:[],version:"current",sidebarPosition:1,frontMatter:{sidebar_position:1},sidebar:"tutorialSidebar",previous:{title:"Digging Deeper",permalink:"/aka.docs/docs/category/digging-deeper"},next:{title:"Requests",permalink:"/aka.docs/docs/the-basic/request"}},d={},c=[{value:"Example custom middleware",id:"example-custom-middleware",level:2},{value:"Example routing middleware",id:"example-routing-middleware",level:2}],s={toc:c},u="wrapper";function p(e){let{components:t,...r}=e;return(0,a.kt)(u,(0,n.Z)({},s,r,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"middleware"},"Middleware"),(0,a.kt)("p",null,"Middleware function is a function that has access to the request object (req), the response object (res), and the next\nmiddleware function in the application's request-response cycle. A middleware function can execute any code, modify the\nrequest and response objects, end the request-response cycle, or call the next middleware function in the stack."),(0,a.kt)("p",null,"Middleware functions can be used to perform a wide range of tasks such as logging, authentication, authorization, input\nvalidation, error handling, compression, and more. They are executed in the order they are defined, so the order of\nmiddleware functions is important."),(0,a.kt)("h2",{id:"example-custom-middleware"},"Example custom middleware"),(0,a.kt)("p",null,"Here's an example of a simple middleware function that logs the HTTP method and URL of the incoming request:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=/middleware/example.js",title:"/middleware/example.js"},"export default (req, res, next) => {\n    console.log(`${req.method} ${req.url}`);\n    next();\n}\n")),(0,a.kt)("p",null,"When you add a middleware function to the middleware directory in your application and export it as a\nfunction that returns another function, it will be automatically loaded globally by the application before any routing\nmethod. This allows you to perform common tasks like authentication or logging on every request to your application\nwithout having to explicitly include it in each individual route."),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"The middleware functions are executed in the order they are defined in the directory. So, it's important to consider the\norder of middleware functions, as the behavior of the entire application could be impacted by the order in which the\nmiddleware functions are defined.")),(0,a.kt)("h2",{id:"example-routing-middleware"},"Example routing middleware"),(0,a.kt)("p",null,"In this example we see how to add a middleware exclusively to a specific route. You can also use a wildcard to control\naccess to the route."),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js",metastring:"title=/middleware/example.js",title:"/middleware/example.js"},"export default ['/example', (req, res, next) => {\n    console.log(`${req.method} ${req.url}`);\n    next();\n}]\n")))}p.isMDXComponent=!0}}]);